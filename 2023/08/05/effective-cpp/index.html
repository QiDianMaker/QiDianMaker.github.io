

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/about/favicon.png">
  <link rel="icon" href="/images/about/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="QiDianMaker">
  <meta name="keywords" content="">
  
    <meta name="description" content="有人说 C++ 程序员可以分为两类，读过 Effective C++ 的和没读过的。世界级 C++ 大师 Scott Meyers 成名之作的第三版的确当得起这样的评价。当您读过本书之后，就获得了迅速提升自己 C++ 功力的一个契机。 在国际上，本书所引起的反响，波及整个计算机的出版领域，余音至今未绝。几乎在所有 C++ 书籍的推荐名单上，本书都会位于前三名。作者高超的技术把握力、独特的视角、诙谐">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective C++">
<meta property="og:url" content="http://example.com/2023/08/05/effective-cpp/index.html">
<meta property="og:site_name" content="奇点创客">
<meta property="og:description" content="有人说 C++ 程序员可以分为两类，读过 Effective C++ 的和没读过的。世界级 C++ 大师 Scott Meyers 成名之作的第三版的确当得起这样的评价。当您读过本书之后，就获得了迅速提升自己 C++ 功力的一个契机。 在国际上，本书所引起的反响，波及整个计算机的出版领域，余音至今未绝。几乎在所有 C++ 书籍的推荐名单上，本书都会位于前三名。作者高超的技术把握力、独特的视角、诙谐">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/effective-cpp/index.png">
<meta property="article:published_time" content="2023-08-04T19:32:12.000Z">
<meta property="article:modified_time" content="2025-07-17T10:35:37.239Z">
<meta property="article:author" content="QiDianMaker">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="经验">
<meta property="article:tag" content="准则">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/images/effective-cpp/index.png">
  
  
  
  <title>Effective C++ - 奇点创客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":60,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"cpp"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"6xahBDKE9bVdQzuufG4r0SrN-gzGzoHsz","app_key":"aS53wAMJ32RwAJRsefQAsX9P","server_url":"https://6xahbdke.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>奇点创客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>文库</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/archives/">
                    <i class="iconfont icon-archive-fill"></i>
                    <span>归档</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/">
                    <i class="iconfont icon-category-fill"></i>
                    <span>分类</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tags/">
                    <i class="iconfont icon-tags-fill"></i>
                    <span>标签</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-th-large"></i>
                <span>精神家园</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/books/">
                    <i class="iconfont icon-book"></i>
                    <span>读书</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/music/">
                    <i class="iconfont icon-music"></i>
                    <span>音乐</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/movies/">
                    <i class="iconfont icon-youtube-fill"></i>
                    <span>电影</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/travel/">
                    <i class="iconfont icon-instagram-fill"></i>
                    <span>旅行</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tools/">
                    <i class="iconfont icon-briefcase"></i>
                    <span>工具</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/images/effective-cpp/banner.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.4)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Effective C++"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        QiDianMaker
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-08-04 11:32" pubdate>
          2023年8月4日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          78 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="技术"
        id="heading-a95dd3e179418be1ecd2a719a22db70e" role="tab" data-toggle="collapse" href="#collapse-a95dd3e179418be1ecd2a719a22db70e"
        aria-expanded="true"
      >
        技术
        <span class="list-group-count">(14)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-a95dd3e179418be1ecd2a719a22db70e"
           role="tabpanel" aria-labelledby="heading-a95dd3e179418be1ecd2a719a22db70e">
        
        
          
          
  <div class="category-post-list">
    
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="C++"
        id="heading-f6f87c9fdcf8b3c3f07f93f1ee8712c9" role="tab" data-toggle="collapse" href="#collapse-f6f87c9fdcf8b3c3f07f93f1ee8712c9"
        aria-expanded="true"
      >
        C++
        <span class="list-group-count">(12)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-f6f87c9fdcf8b3c3f07f93f1ee8712c9"
           role="tabpanel" aria-labelledby="heading-f6f87c9fdcf8b3c3f07f93f1ee8712c9">
        
        
          
          
  <div class="category-post-list">
    
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="笔记"
        id="heading-7051dc52c184c205e39aa54b4664ae9b" role="tab" data-toggle="collapse" href="#collapse-7051dc52c184c205e39aa54b4664ae9b"
        aria-expanded="true"
      >
        笔记
        <span class="list-group-count">(6)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-7051dc52c184c205e39aa54b4664ae9b"
           role="tabpanel" aria-labelledby="heading-7051dc52c184c205e39aa54b4664ae9b">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/08/25/cpp-value-categories/" title="C++ 值类别探究"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C++ 值类别探究</span>
        </a>
      
    
      
      
        <a href="/2023/08/22/cpp-concepts-introduction/" title="C++ 概念简介"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C++ 概念简介</span>
        </a>
      
    
      
      
        <a href="/2023/08/05/effective-cpp/" title="Effective C++"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Effective C++</span>
        </a>
      
    
      
      
        <a href="/2023/08/08/effective-modern-cpp/" title="Effective Modern C++"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Effective Modern C++</span>
        </a>
      
    
      
      
        <a href="/2023/08/07/effective-stl/" title="Effective STL"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Effective STL</span>
        </a>
      
    
      
      
        <a href="/2023/08/06/more-effective-cpp/" title="More Effective C++"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">More Effective C++</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="翻译"
        id="heading-8b3607d0f4181a3cb6ffdccf7185f09b" role="tab" data-toggle="collapse" href="#collapse-8b3607d0f4181a3cb6ffdccf7185f09b"
        aria-expanded="false"
      >
        翻译
        <span class="list-group-count">(6)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-8b3607d0f4181a3cb6ffdccf7185f09b"
           role="tabpanel" aria-labelledby="heading-8b3607d0f4181a3cb6ffdccf7185f09b">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/08/18/boost-library-overview/" title="Boost 库概览"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Boost 库概览</span>
        </a>
      
    
      
      
        <a href="/2023/08/04/cpp-lambda-story/" title="C++ Lambda 的故事"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C++ Lambda 的故事</span>
        </a>
      
    
      
      
        <a href="/2023/08/03/cpp-initialization-story/" title="C++ 初始化的故事"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C++ 初始化的故事</span>
        </a>
      
    
      
      
        <a href="/2023/08/09/cpp-template/" title="C++ 模板"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C++ 模板</span>
        </a>
      
    
      
      
        <a href="/2023/08/14/eigen-library-guide/" title="Eigen 库官方文档"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Eigen 库官方文档</span>
        </a>
      
    
      
      
        <a href="/2023/08/15/range-library-guide/" title="Range-v3 库官方文档"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Range-v3 库官方文档</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Haskell"
        id="heading-a59b783ba97fcd85891ddb2e62fbfebb" role="tab" data-toggle="collapse" href="#collapse-a59b783ba97fcd85891ddb2e62fbfebb"
        aria-expanded="false"
      >
        Haskell
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-a59b783ba97fcd85891ddb2e62fbfebb"
           role="tabpanel" aria-labelledby="heading-a59b783ba97fcd85891ddb2e62fbfebb">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/08/13/haskell-primer/" title="Haskell 趣学指南"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Haskell 趣学指南</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="图像处理"
        id="heading-7808a68ee1b34dab43011429a12de19e" role="tab" data-toggle="collapse" href="#collapse-7808a68ee1b34dab43011429a12de19e"
        aria-expanded="false"
      >
        图像处理
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-7808a68ee1b34dab43011429a12de19e"
           role="tabpanel" aria-labelledby="heading-7808a68ee1b34dab43011429a12de19e">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/08/10/digital-image-processing/" title="数字图像处理"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">数字图像处理</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Effective C++</h1>
            
            
              <div class="markdown-body">
                
                <p>有人说 C++ 程序员可以分为两类，读过 Effective C++ 的和没读过的。世界级 C++ 大师 Scott Meyers 成名之作的第三版的确当得起这样的评价。当您读过本书之后，就获得了迅速提升自己 C++ 功力的一个契机。</p>
<p>在国际上，本书所引起的反响，波及整个计算机的出版领域，余音至今未绝。几乎在所有 C++ 书籍的推荐名单上，本书都会位于前三名。作者高超的技术把握力、独特的视角、诙谐轻松的写作风格、独具匠心的内容组织，都受到极大的推崇和效仿。这种奇特的现象，只能解释为人们对这本书衷心的赞美和推崇。</p>
<p>这本书不是读完一遍就可以束之高阁的快餐读物，也不是用于解决手边问题的参考手册，而是需要您去反复阅读体会的，C++ 是真正程序员的语言，背后有着精深的思想与无与伦比的表达能力，这使得它具有类似宗教般的魅力。希望这本书能够帮助您跨越 C++ 的重重险阻，领略高处才有的壮美风光，做一个成功而快乐的 C++ 程序员。</p>
<h2 id="1-让自己习惯-C"><a href="#1-让自己习惯-C" class="headerlink" title="1. 让自己习惯 C++"></a>1. 让自己习惯 C++</h2><p>不论你的编程背景是什么，C++ 都可能让你觉得有点熟悉。它是一个威力强大的语言，带着众多特性，但是在你可以驾驭其威力并有效运用其特性之前，你必须先习惯 C++ 的办事方式。本书谈的便是这个。总有某些东西比其他更基础些，本章就是最基本的一些东西。</p>
<h3 id="条款-01：视-C-为一个语言联邦"><a href="#条款-01：视-C-为一个语言联邦" class="headerlink" title="条款 01：视 C++ 为一个语言联邦"></a>条款 01：视 C++ 为一个语言联邦</h3><p>今天的 C++ 已经是一个多重范式的编程语言（muti-paradigm programming language），一个同时支持过程形式（procedural），面向对象形式（object-oriented）、函数形式（functional）、泛型形式（generic）、元编程形式（metaprogramming）的语言。</p>
<p>将 C++ 视为一个由相关语言组成的联邦而非单一语言。在其某个次语言（sublanguage）中，各种守则与通例都倾向简单、直观易懂、并且容易记住。然而，当你从一个次语言移往另一个次语言，守则可能改变。为了理解 C++，你必须认识其主要的次语言。</p>
<ul>
<li>C</li>
<li>Object Oriented C++</li>
<li>Template C++</li>
<li>STL</li>
</ul>
<p>因此说，C++ 并不是一个带有一组守则的一体语言：它是从四个次语言组成的联邦政府，每个次语言都有自己的规约。记住这四个次语言你就会发现 C++ 容易了解得多。</p>
<div class="note note-success">
            <ul><li>C++ 高效编程守则视状况而变化，取决于你使用 C++ 的哪一部分。</li></ul>
          </div>

<h3 id="条款-02：尽量以-const，enum，inline-替换-define"><a href="#条款-02：尽量以-const，enum，inline-替换-define" class="headerlink" title="条款 02：尽量以 const，enum，inline 替换 #define"></a>条款 02：尽量以 const，enum，inline 替换 #define</h3><p>宏定义只会被预处理器看到，而不会被编译器看到；但是常量却可以。<br>可以定义一个类的专属常量，却无法利用 <code>#define</code> 来实现相同的功能，因为宏定义并不重视作用域。<br>无法取地址的常量可以用类内枚举取代。</p>
<p>宏函数变量必须加小括号，而且其行为并不完全与函数相同。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// 以 a 和 b 中较大值调用 f</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> CALL_WITH_MAX(a, b) f((a) &gt; (b) ? (a) : (b))</span><br><br><span class="hljs-type">int</span> a = <span class="hljs-number">5</span>, b = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">CALL_WITH_MAX</span>(++a, b);    <span class="hljs-comment">// a 被累加两次</span><br><span class="hljs-built_in">CALL_WITH_MAX</span>(++a, b+<span class="hljs-number">10</span>); <span class="hljs-comment">// a 被累加一次</span><br></code></pre></td></tr></table></figure>

<p>在这里，调用 <code>f</code> 之前，<code>a</code> 的递增次数竟然取决于“它被拿来和谁比较”！</p>
<p>使用内联模板函数替换宏：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">callWithMax</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">f</span>(a &gt; b ? a : b);<br>&#125;<br></code></pre></td></tr></table></figure>


<div class="note note-success">
            <ul><li>对于单纯常量，最好使用 <code>const</code> 对象或 <code>enums</code> 替换 <code>#defines</code>。</li><li>对于形似函数的宏（macros），最好改用 <code>inline</code> 函数替换 <code>#defines</code>。</li></ul>
          </div>

<h3 id="条款-03：尽可能使用-const"><a href="#条款-03：尽可能使用-const" class="headerlink" title="条款 03：尽可能使用 const"></a>条款 03：尽可能使用 const</h3><p><code>const</code> 修饰指针需要区分顶层 const 与底层 const。<br>STL 迭代器 <code>std::vector&lt;T&gt;::const_iterator</code> 模拟的是 <code>const T*</code> 指针语义。<br>对函数的返回值添加 <code>const</code> 有助于防止用户将返回值按左值使用。</p>
<h4 id="const-成员函数"><a href="#const-成员函数" class="headerlink" title="const 成员函数"></a>const 成员函数</h4><p>将 <code>const</code> 实施于成员函数有两大好处：</p>
<ol>
<li>它们使类接口比较容易被理解。这是因为，得知哪个函数可以改动对象内容而哪个函数不行，很是重要。</li>
<li>它们使“操作 <code>const</code> 对象”成为可能。这对编写高效代码是个关键，因为如<a href="#%E6%9D%A1%E6%AC%BE-20%E5%AE%81%E4%BB%A5%E4%BC%A0%E5%B8%B8%E9%87%8F%E5%BC%95%E7%94%A8%E6%9B%BF%E6%8D%A2%E4%BC%A0%E5%80%BC">条款 20</a> 所言，改善 C++ 程序效率的一个根本办法是以常引用的方式传递对象，而此技术可行的前提是，我们有 <code>const</code> 成员函数可用来处理取得（并经修饰而成）的 <code>const</code> 对象。</li>
</ol>
<p>两个成员函数，如果只是常量性不同，可以被重载。</p>
<p>对于成员函数的常量性判定，需要区分<strong>物理常量性</strong>和<strong>逻辑常量性</strong>：</p>
<ul>
<li>物理常量性是指，成员函数只有在不更改对象之任何成员变量（<code>static</code> 除外）时才可以说是 <code>const</code>。也就是说它不更改对象内的任何一个比特。<br>  不幸的是许多成员函数虽然不十足具备 <code>const</code> 性质却能通过物理常量性测试。更具体地说，一个更改了”指针所指物”的成员函数虽然不能算是 <code>const</code>，但如果只有指针（而非其所指物）隶属于对象，那么称此函数为物理常量性不会引发编译器异议。这导致反直观结果。</li>
<li>逻辑常量性是指，一个 <code>const</code> 成员函数可以修改它所处理的对象内的某些比特，但只有在客户端侦测不出的情况下才得如此。对于与物理常量性冲突的字段，需要用 <code>mutable</code> 关键字修饰。<code>mutable</code> 可以释放掉非静态成员函数的按比特常量约束。</li>
</ul>
<h4 id="在-const-和非-const-成员函数中避免重复"><a href="#在-const-和非-const-成员函数中避免重复" class="headerlink" title="在 const 和非 const 成员函数中避免重复"></a>在 const 和非 const 成员函数中避免重复</h4><p>对于在 <code>const</code> 和非 <code>const</code> 成员函数中有都会出现的重复逻辑，推荐使用非 <code>const</code> 版本调用 <code>const</code> 版本。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TextBlock</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    ...<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>&amp; <span class="hljs-keyword">operator</span>[](std::<span class="hljs-type">size_t</span> position) <span class="hljs-type">const</span><br>    &#123;<br>        ...  <span class="hljs-comment">// 边界检查</span><br>        ...  <span class="hljs-comment">// 标志数据访问</span><br>        ...  <span class="hljs-comment">// 校验数据完整性</span><br>        <span class="hljs-keyword">return</span> text[position];<br>    &#125;<br><br>    <span class="hljs-type">char</span>&amp; <span class="hljs-keyword">operator</span>[](std::<span class="hljs-type">size_t</span> position)<br>    &#123;<br>        <span class="hljs-keyword">return</span><br>            <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">char</span>&amp;&gt;(                        <span class="hljs-comment">// 将 op[] 返回值的 const 移除</span><br>                <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">const</span> TextBlock&amp;&gt;(*<span class="hljs-keyword">this</span>)  <span class="hljs-comment">// 为 *this 加上 const</span><br>                    [position]                        <span class="hljs-comment">// 调用 const op[]</span><br>            );<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::string text;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>反向做法——令 <code>const</code> 版本调用非 <code>const</code> 版本是不应该做的。因为 <code>const</code> 成员函数承诺绝不改变其对象的逻辑状态, 非 <code>const</code> 成员函数却没有这般承诺。如果在 <code>const</code> 函数内调用非 <code>const</code> 函数，就是冒了这样的风险：你曾经承诺不改动的那个对象被改动了。</p>
<div class="note note-success">
            <ul><li>将某些东西声明为 <code>const</code> 可帮助编译器侦测出错误用法。<code>const</code> 可被施加于任何作用域内的对象、函数参数、函数返回类型、成员函数本体。</li><li>编译器强制实施“物理上的常量性”（bitwise constness），但你编写程序时应使用“概念上的常量性”（conceptual constness）。</li><li>当 const 和非 const 成员函数有着实质等价的实现时，令非 const 版本调用 const 版本可避免代码重复。</li></ul>
          </div>

<h3 id="条款-04：确定对象被使用前已先被初始化"><a href="#条款-04：确定对象被使用前已先被初始化" class="headerlink" title="条款 04：确定对象被使用前已先被初始化"></a>条款 04：确定对象被使用前已先被初始化</h3><div class="note note-success">
            <ul><li>为内置型对象进行手工初始化，因为 C++ 不保证初始化它们。</li><li>构造函数最好使用成员初值列（member initialization list），而不要在构造函数本体内使用赋值操作（assignment）。初值列列出的成员函数，其排列次序应该和它们在类中的声明次序相同。</li><li>为免除“跨编译单元之初始化次序”问题，请以局部静态对象替换非局部静态对象。</li></ul>
          </div>

<h2 id="2-构造-析构-赋值运算"><a href="#2-构造-析构-赋值运算" class="headerlink" title="2. 构造&#x2F;析构&#x2F;赋值运算"></a>2. 构造&#x2F;析构&#x2F;赋值运算</h2><h3 id="条款-05：了解-C-默默编写并调用哪些函数"><a href="#条款-05：了解-C-默默编写并调用哪些函数" class="headerlink" title="条款 05：了解 C++ 默默编写并调用哪些函数"></a>条款 05：了解 C++ 默默编写并调用哪些函数</h3><div class="note note-success">
            <ul><li>编译器可以暗自为类创建默认构造函数、复制构造函数、复制赋值操作符，以及析构函数。</li></ul>
          </div>

<h3 id="条款-06：若不想使用编译器自动生成的函数，就该明确拒绝"><a href="#条款-06：若不想使用编译器自动生成的函数，就该明确拒绝" class="headerlink" title="条款 06：若不想使用编译器自动生成的函数，就该明确拒绝"></a>条款 06：若不想使用编译器自动生成的函数，就该明确拒绝</h3><div class="note note-success">
            <ul><li>为驳回编译器自动（暗自）提供的机能，可将相应的成员函数声明为私有并且不予实现。使用像 <code>Uncopyable</code> 这样的基类也是一种做法。</li></ul>
          </div>

<h3 id="条款-07：为多态基类声明虚析构函数"><a href="#条款-07：为多态基类声明虚析构函数" class="headerlink" title="条款 07：为多态基类声明虚析构函数"></a>条款 07：为多态基类声明虚析构函数</h3><div class="note note-success">
            <ul><li>带多态性质的（polymorphic）基类应该声明一个虚析构函数。如果类带有任何虚函数，它就应该拥有一个虚析构函数。</li><li>一个类的设计目的如果不是作为基类使用，或不是为了具备多态性（polymorphically），就不该声明虚析构函数。</li></ul>
          </div>

<h3 id="条款-08：别让异常逃离析构函数"><a href="#条款-08：别让异常逃离析构函数" class="headerlink" title="条款 08：别让异常逃离析构函数"></a>条款 08：别让异常逃离析构函数</h3><div class="note note-success">
            <ul><li>析构函数绝对不要吐出异常。如果一个被析构函数调用的函数可能抛出异常，析构函数应该捕获任何异常，然后吞下它们（不传播）或结束程序。</li><li>如果客户需要对某个操作函数运行期间抛出的异常做出反应，那么类应该提供一个普通函数（而非在析构函数中）执行该操作。</li></ul>
          </div>

<h3 id="条款-09：绝不在构造和析构过程中调用虚函数"><a href="#条款-09：绝不在构造和析构过程中调用虚函数" class="headerlink" title="条款 09：绝不在构造和析构过程中调用虚函数"></a>条款 09：绝不在构造和析构过程中调用虚函数</h3><div class="note note-success">
            <ul><li>在构造和析构期间不要调用虚函数，因为这类调用从不下降至派生类（比起当前执行构造函数和析构函数的那层）。</li></ul>
          </div>

<h3 id="条款-10：令-operator-返回一个-this-的引用"><a href="#条款-10：令-operator-返回一个-this-的引用" class="headerlink" title="条款 10：令 operator&#x3D; 返回一个 *this 的引用"></a>条款 10：令 operator&#x3D; 返回一个 *this 的引用</h3><div class="note note-success">
            <ul><li>令赋值（assignment）操作符返回一个 <code>*this</code> 的引用，以支持连锁赋值。</li></ul>
          </div>

<h3 id="条款-11：在-operator-中处理“自我赋值”"><a href="#条款-11：在-operator-中处理“自我赋值”" class="headerlink" title="条款 11：在 operator&#x3D; 中处理“自我赋值”"></a>条款 11：在 operator&#x3D; 中处理“自我赋值”</h3><div class="note note-success">
            <ul><li>确保当对象自我赋值时 <code>operator=</code> 有良好行为。其中技术包括比较“来源对象”和“目标对象”的地址、精心周到的语句顺序、以及复制并交换。</li><li>确定任何函数如果操作一个以上的对象，其中多个对象是同一个对象时，其行为依然正确。</li></ul>
          </div>

<h3 id="条款-12：复制对象时勿忘其每一个成分"><a href="#条款-12：复制对象时勿忘其每一个成分" class="headerlink" title="条款 12：复制对象时勿忘其每一个成分"></a>条款 12：复制对象时勿忘其每一个成分</h3><div class="note note-success">
            <ul><li>复制函数应该确保复制“对象内的所有成员变量”以及“所有基类成分”。</li><li>不要尝试以某个复制函数实现另一个复制函数。应该将共同机能放进第三个函数中，并由两个复制函数共同调用。</li></ul>
          </div>

<h2 id="3-资源管理"><a href="#3-资源管理" class="headerlink" title="3. 资源管理"></a>3. 资源管理</h2><h3 id="条款-13：以对象管理资源"><a href="#条款-13：以对象管理资源" class="headerlink" title="条款 13：以对象管理资源"></a>条款 13：以对象管理资源</h3><div class="note note-success">
            <ul><li>为防止资源泄露，请使用 RAII 对象，它们在构造函数中获得资源并在析构函数中释放资源。</li><li>两个常被使用的 RAII 类分别是 <code>tr1::shared_ptr</code> 和 <code>auto_ptr</code>。前者常是较佳的选择，因为其复制行为比较直观。若选择 <code>auto_ptr</code>，复制动作会使它（被复制物）指向 <code>null</code>。</li></ul>
          </div>

<h3 id="条款-14：在资源管理类中小心拷贝行为"><a href="#条款-14：在资源管理类中小心拷贝行为" class="headerlink" title="条款 14：在资源管理类中小心拷贝行为"></a>条款 14：在资源管理类中小心拷贝行为</h3><div class="note note-success">
            <ul><li>复制 RAII 对象必须一并复制它所管理的资源，所以资源的复制行为决定 RAII 对象的复制行为。</li><li>普遍而常见的 RAII 类的复制行为是：抑制复制、试行引用计数（reference counting）。不过其他行为也都可能被实现。</li></ul>
          </div>

<h3 id="条款-15：在资源管理类中提供对原始资源的访问"><a href="#条款-15：在资源管理类中提供对原始资源的访问" class="headerlink" title="条款 15：在资源管理类中提供对原始资源的访问"></a>条款 15：在资源管理类中提供对原始资源的访问</h3><div class="note note-success">
            <ul><li>API 往往要求访问原始资源（raw resources），所以每一个 RAII 类应该提供一个“取得其所管理之资源”的办法。</li><li>对原始资源的访问可能经由显示转换或隐式转换。一般而言显示转换比较安全，但隐式转换对客户比较方便。</li></ul>
          </div>

<h3 id="条款-16：成对使用-new-和-delete-时要采取相同形式"><a href="#条款-16：成对使用-new-和-delete-时要采取相同形式" class="headerlink" title="条款 16：成对使用 new 和 delete 时要采取相同形式"></a>条款 16：成对使用 new 和 delete 时要采取相同形式</h3><div class="note note-success">
            <ul><li>如果你在 <code>new</code> 表达式中使用 []，必须在相应的 <code>delete</code> 表达式中也使用 []。如果你在 <code>new</code> 表达式中不使用 []，一定不要在相应的 delete 表达式中使用 []。</li></ul>
          </div>

<h3 id="条款-17：以独立语句将-newed-对象置入智能指针"><a href="#条款-17：以独立语句将-newed-对象置入智能指针" class="headerlink" title="条款 17：以独立语句将 newed 对象置入智能指针"></a>条款 17：以独立语句将 newed 对象置入智能指针</h3><div class="note note-success">
            <ul><li>以独立语句将 <code>new</code> 生成的对象存储于（置入）智能指针内。如果不这样做，一旦异常被抛出，有可能导致难以察觉的资源泄露。</li></ul>
          </div>

<h2 id="4-设计与声明"><a href="#4-设计与声明" class="headerlink" title="4. 设计与声明"></a>4. 设计与声明</h2><h3 id="条款-18：让接口容易被正确使用，不易被误用"><a href="#条款-18：让接口容易被正确使用，不易被误用" class="headerlink" title="条款 18：让接口容易被正确使用，不易被误用"></a>条款 18：让接口容易被正确使用，不易被误用</h3><div class="note note-success">
            <ul><li>好的接口很容易被使用，不容易被误用。你应该在你的所有接口中努力达成这些性质。</li><li>“促进正确使用”的办法包括接口的一致性，以及与内置类型的行为兼容。</li><li>“阻止误用”的办法包括建立新类型、限制类型上的操作，束缚对象值，以消除客户的资源管理责任。</li><li><code>tr1::shared_ptr</code> 支持定制型删除器（custom deleter）。这可防范 DLL 问题，可被用来自动解除互斥锁等等。</li></ul>
          </div>

<h3 id="条款-19：设计类犹如设计类型"><a href="#条款-19：设计类犹如设计类型" class="headerlink" title="条款 19：设计类犹如设计类型"></a>条款 19：设计类犹如设计类型</h3><div class="note note-success">
            <ul><li>类的设计就是类型的设计。在定义一个新类型之前，请确保你已经考虑过本条款覆盖的所有讨论主题。</li></ul>
          </div>

<h3 id="条款-20：宁以传常量引用替换传值"><a href="#条款-20：宁以传常量引用替换传值" class="headerlink" title="条款 20：宁以传常量引用替换传值"></a>条款 20：宁以传常量引用替换传值</h3><div class="note note-success">
            <ul><li>尽量以传递常量引用替换传值。前者通常比较高效，并可避免对象切割问题。</li><li>以上规则并不适用于内置类型，以及 STL 的迭代器和函数对象。对它们而言，传值往往比较适当。</li></ul>
          </div>

<h3 id="条款-21：必须返回对象时，别妄想返回其引用"><a href="#条款-21：必须返回对象时，别妄想返回其引用" class="headerlink" title="条款 21：必须返回对象时，别妄想返回其引用"></a>条款 21：必须返回对象时，别妄想返回其引用</h3><div class="note note-success">
            <ul><li>绝不要返回指针或引用指向一个局部栈对象，或返回引用指向一个堆分配对象，或返回指针或引用指向一个局部静态对象而言有可能同时需要多个这样的对象。条款 4 已经为“在单线程中合理返回一个局部静态对象”提供一份设计实例。</li></ul>
          </div>

<h3 id="条款-22：将成员变量声明为私有"><a href="#条款-22：将成员变量声明为私有" class="headerlink" title="条款 22：将成员变量声明为私有"></a>条款 22：将成员变量声明为私有</h3><div class="note note-success">
            <ul><li>切记将成员变量声明为私有。这可赋予客户访问数据的一致性、可细微划分访问控制、允许约束条件获得保证，并提供类作者以充分的实现弹性。</li><li><code>protected</code> 并不比 <code>public</code> 更具封装性。</li></ul>
          </div>

<h3 id="条款-23：宁以非成员、非友元替换成员函数"><a href="#条款-23：宁以非成员、非友元替换成员函数" class="headerlink" title="条款 23：宁以非成员、非友元替换成员函数"></a>条款 23：宁以非成员、非友元替换成员函数</h3><div class="note note-success">
            <ul><li>如果你需要为某个函数的所有参数（包括 <code>this</code> 指针所指的那个隐藏参数）进行类型转换，那么这个函数必须是个非成员函数。</li><li>宁可拿非成员非友元函数替换成员函数。这样做可以增加封装性、包裹弹性和机能扩充性。</li></ul>
          </div>

<h3 id="条款-24：若所有参数皆需类型转换，请为此采用非成员函数"><a href="#条款-24：若所有参数皆需类型转换，请为此采用非成员函数" class="headerlink" title="条款 24：若所有参数皆需类型转换，请为此采用非成员函数"></a>条款 24：若所有参数皆需类型转换，请为此采用非成员函数</h3><div class="note note-success">
            <ul><li>如果你需要为某个函数的所有参数（包括被 <code>this</code> 指针所指的那个隐藏参数）进行类型转换，那么这个函数必须是个非成员函数。</li></ul>
          </div>

<h3 id="条款-25：考虑写出一个不抛异常的-swap-函数"><a href="#条款-25：考虑写出一个不抛异常的-swap-函数" class="headerlink" title="条款 25：考虑写出一个不抛异常的 swap 函数"></a>条款 25：考虑写出一个不抛异常的 swap 函数</h3><div class="note note-success">
            <ul><li>当 <code>std::swap</code> 对你的类型效率不高时，提供一个 <code>swap</code> 成员函数，并确定这个函数不抛出异常。</li><li>如果你提供一个成员函数版 <code>swap</code>，也该提供一个非成员版 <code>swap</code> 用来调用前者。对于类（而非模板），也请特化 <code>std::swap</code>。</li><li>调用 <code>swap</code> 时应针对 <code>std::swap</code> 使用 <code>using</code> 声明式，然后调用 <code>swap</code> 并且不带任何“命名空间资格修饰”。</li><li>为“用户定义类型”进行 <code>std templates</code> 全特化是好的，但千万不要尝试在 <code>std</code> 内加入某些对 <code>std</code> 而言全新的东西。</li></ul>
          </div>

<h2 id="5-实现"><a href="#5-实现" class="headerlink" title="5. 实现"></a>5. 实现</h2><h3 id="条款-26：尽可能延后变量定义式的出现时间"><a href="#条款-26：尽可能延后变量定义式的出现时间" class="headerlink" title="条款 26：尽可能延后变量定义式的出现时间"></a>条款 26：尽可能延后变量定义式的出现时间</h3><div class="note note-success">
            <ul><li>尽可能延后变量定义式的出现。这样做可增加程序的清晰度并改善程序效率。</li></ul>
          </div>

<h3 id="条款-27：尽量少做转型动作"><a href="#条款-27：尽量少做转型动作" class="headerlink" title="条款 27：尽量少做转型动作"></a>条款 27：尽量少做转型动作</h3><div class="note note-success">
            <ul><li>如果可以，尽量避免转型，特别是在注重效率的代码中避免 <code>dynamic_cast</code>。如果有个设计需要转型动作，试着发展无需转型的替代设计。</li><li>如果转型是必须的，试着将它隐藏于某个函数背后。客户随时可以调用该函数，而不需要将转型放进他们自己的代码内。</li><li>宁可使用 C++ 风格（新式）转型，不要使用旧式转型。前者很容易辨别出来，而且也比较有着分门别类的职掌。</li></ul>
          </div>

<h3 id="条款-28：避免返回指向对象内部成分的句柄"><a href="#条款-28：避免返回指向对象内部成分的句柄" class="headerlink" title="条款 28：避免返回指向对象内部成分的句柄"></a>条款 28：避免返回指向对象内部成分的句柄</h3><div class="note note-success">
            <ul><li>避免返回句柄（包括引用、指针、迭代器）指向对象内部。遵守这个条款可增加封装性，帮助 <code>const</code> 成员函数的行为像个 <code>const</code>，并将发生“虚吊号码牌”（dangling handles）的可能性降至最低。</li></ul>
          </div>

<h3 id="条款-29：为“异常安全”而努力是值得的"><a href="#条款-29：为“异常安全”而努力是值得的" class="headerlink" title="条款 29：为“异常安全”而努力是值得的"></a>条款 29：为“异常安全”而努力是值得的</h3><div class="note note-success">
            <ul><li>异常安全函数（Exception-safe functions）即使发生异常也不会泄露资源或允许任何数据结构败坏。这样的函数区分为三种可能的保证：基本型、强烈型、不抛异常型。</li><li>“强烈保证”往往能够以复制并交换实现出来，但“强烈保证”并非对所有函数都可实现或具备现实意义。</li><li>函数提供的“异常安全保证”通常最高只等于其所调用之各个函数的“异常安全保证”中的最弱者。</li></ul>
          </div>

<h3 id="条款-30：透彻了解内联的里里外外"><a href="#条款-30：透彻了解内联的里里外外" class="headerlink" title="条款 30：透彻了解内联的里里外外"></a>条款 30：透彻了解内联的里里外外</h3><div class="note note-success">
            <ul><li>将大多数内联限制在小型、被频繁调用的函数身上。这可使日后的调试过程和二进制升级更容易，也可使潜在的代码膨胀问题最小化，使程序的速度提升机会最大化。</li><li>不要只因为函数模板出现在头文件，就将它们声明为内联。</li></ul>
          </div>

<h3 id="条款-31：将文件的编译依存关系降至最低"><a href="#条款-31：将文件的编译依存关系降至最低" class="headerlink" title="条款 31：将文件的编译依存关系降至最低"></a>条款 31：将文件的编译依存关系降至最低</h3><div class="note note-success">
            <ul><li>支持“编译依存性最小化”的一般构想是：相依与声明式，不要相依于定义式。基于此构想的两个手段是句柄类（Handle classes）和接口类（Interface classes）。</li><li>程序库头文件应该以“完全仅有声明式”的形式存在。这种做法不论是否涉及模板都适用。</li></ul>
          </div>

<h2 id="6-继承与面向对象设计"><a href="#6-继承与面向对象设计" class="headerlink" title="6. 继承与面向对象设计"></a>6. 继承与面向对象设计</h2><h3 id="条款-32：确定你的公有继承塑模出“是一个”关系"><a href="#条款-32：确定你的公有继承塑模出“是一个”关系" class="headerlink" title="条款 32：确定你的公有继承塑模出“是一个”关系"></a>条款 32：确定你的公有继承塑模出“是一个”关系</h3><div class="note note-success">
            <ul><li>“公有继承”意味着“是一个”。适用于基类身上的每一件事情一定也适用于派生类身上，因为每一个派生类对象也都是一个基类对象。</li></ul>
          </div>

<h3 id="条款-33：避免遮掩继承而来的名称"><a href="#条款-33：避免遮掩继承而来的名称" class="headerlink" title="条款 33：避免遮掩继承而来的名称"></a>条款 33：避免遮掩继承而来的名称</h3><div class="note note-success">
            <ul><li>派生类内的名称会遮掩基类内的名称。在共有继承下从来没有人希望如此。</li><li>为了让被遮掩的名称再见天日，可使用 using 声明式或转交函数(forwarding functions)。</li></ul>
          </div>

<h3 id="条款-34：区分接口继承和实现继承"><a href="#条款-34：区分接口继承和实现继承" class="headerlink" title="条款 34：区分接口继承和实现继承"></a>条款 34：区分接口继承和实现继承</h3><div class="note note-success">
            <ul><li>接口继承和实现继承不同。在共有继承下，派生类总是继承基类的接口。</li><li>纯虚函数只具体指定接口继承。</li><li>简朴的非纯虚函数具体指定接口继承及缺省实现继承。</li><li>非虚函数具体指定接口继承以及强制性实现继承。</li></ul>
          </div>

<h3 id="条款-35：考虑虚函数以外的其他选择"><a href="#条款-35：考虑虚函数以外的其他选择" class="headerlink" title="条款 35：考虑虚函数以外的其他选择"></a>条款 35：考虑虚函数以外的其他选择</h3><div class="note note-success">
            <ul><li>虚函数的替代方案包括 NVI 手法以及策略设计模式的多种形式。NVI 手法自身是一个特殊形式的模板方法设计模式。</li><li>将机能从成员函数移到类外部函数，带来的一个缺点是，非成员函数无法访问类的非公有成员。</li><li>tr1::function 对象的行为就像一般函数指针。这样的对象可接纳“与给定之目标签名式兼容”的所有可调用物。</li></ul>
          </div>

<h3 id="条款-36：绝不重新定义继承而来的非虚函数"><a href="#条款-36：绝不重新定义继承而来的非虚函数" class="headerlink" title="条款 36：绝不重新定义继承而来的非虚函数"></a>条款 36：绝不重新定义继承而来的非虚函数</h3><div class="note note-success">
            <ul><li>绝对不要重新定义继承而来的非虚函数。</li></ul>
          </div>

<h3 id="条款-37：绝不重新定义继承而来的缺省参数值"><a href="#条款-37：绝不重新定义继承而来的缺省参数值" class="headerlink" title="条款 37：绝不重新定义继承而来的缺省参数值"></a>条款 37：绝不重新定义继承而来的缺省参数值</h3><div class="note note-success">
            <ul><li>绝对不要重新定义一个继承而来的缺省参数值，因为缺省参数值都是静态绑定的，而虚函数 – 你唯一应该覆写的东西 – 却是动态绑定的。</li></ul>
          </div>

<h3 id="条款-38：通过复合塑模出“有一个”或“根据某物实现出”"><a href="#条款-38：通过复合塑模出“有一个”或“根据某物实现出”" class="headerlink" title="条款 38：通过复合塑模出“有一个”或“根据某物实现出”"></a>条款 38：通过复合塑模出“有一个”或“根据某物实现出”</h3><div class="note note-success">
            <ul><li>复合的意义与共有继承完全不同。</li><li>在应用域，复合意味着有一个。在实现域，复合意味着根据某物实现出。</li></ul>
          </div>

<h3 id="条款-39：明智而审慎地使用私有继承"><a href="#条款-39：明智而审慎地使用私有继承" class="headerlink" title="条款 39：明智而审慎地使用私有继承"></a>条款 39：明智而审慎地使用私有继承</h3><div class="note note-success">
            <ul><li>私有继承意味着根据某物实现出。它通常比复合的级别低。但是当派生类需要访问基类的保护成员，或需要重新定义继承而来的虚函数时，这么设计是合理的。</li><li>和复合不同，私有继承可以造成空基类优化。这对致力于“对象尺寸最小化”的程序库开发者而言，可能很重要。</li></ul>
          </div>

<h3 id="条款-40：明智而审慎地使用多重继承"><a href="#条款-40：明智而审慎地使用多重继承" class="headerlink" title="条款 40：明智而审慎地使用多重继承"></a>条款 40：明智而审慎地使用多重继承</h3><div class="note note-success">
            <ul><li>多重继承比单一继承复杂。它可能导致新的歧义，以及对虚继承的需要。</li><li>虚继承会增加大小、速度、初始化（及赋值）复杂度等等成本。如果虚基类不带任何数据，将是最具实用价值的情况。</li><li>多重继承的确有正当用途。其中一个情节涉及“共有继承某个接口类”和“私有继承某个协助实现的类”的两相组合。</li></ul>
          </div>

<h2 id="7-模板与泛型编程"><a href="#7-模板与泛型编程" class="headerlink" title="7. 模板与泛型编程"></a>7. 模板与泛型编程</h2><h3 id="条款-41：了解隐式接口和编译期多态"><a href="#条款-41：了解隐式接口和编译期多态" class="headerlink" title="条款 41：了解隐式接口和编译期多态"></a>条款 41：了解隐式接口和编译期多态</h3><div class="note note-success">
            <ul><li>类（classes）和模板（templates）都支持接口（interfaces）和多态（polymorphism）。</li><li>对类而言接口是显式的（explicit），以函数签名为中心。多态则是通过虚函数发生于运行期。</li><li>对模板参数而言，接口是隐式的（implicit），奠基于有效表达式。多态则是通过模板具现化和函数重载解析（function overloading resolution）发生于编译期。</li></ul>
          </div>

<h3 id="条款-42：了解-typename-的双重意义"><a href="#条款-42：了解-typename-的双重意义" class="headerlink" title="条款 42：了解 typename 的双重意义"></a>条款 42：了解 typename 的双重意义</h3><div class="note note-success">
            <ul><li>声明模板参数时，前缀关键字 <code>class</code> 和 <code>typename</code> 可互换。</li><li>请使用关键字 <code>typename</code> 标识嵌套从属类型名称；但不得在基类列或成员初值列内以它作为基类修饰符。</li></ul>
          </div>

<h3 id="条款-43：学习处理模板化基类内的名称"><a href="#条款-43：学习处理模板化基类内的名称" class="headerlink" title="条款 43：学习处理模板化基类内的名称"></a>条款 43：学习处理模板化基类内的名称</h3><div class="note note-success">
            <ul><li>可在派生类模板内通过 “this-&gt;” 指涉基类模板内的成员名称，或籍由一个明白写出的“基类资格修饰符”完成。</li></ul>
          </div>

<h3 id="条款-44：将与参数无关的代码抽离模板"><a href="#条款-44：将与参数无关的代码抽离模板" class="headerlink" title="条款 44：将与参数无关的代码抽离模板"></a>条款 44：将与参数无关的代码抽离模板</h3><div class="note note-success">
            <ul><li>模板生成多个类或多个函数，所以任何模板代码都不该与某个造成膨胀的模板参数产生相依关系关系。</li><li>因非类型模板参数而造成的代码膨胀，往往可以消除，做法是以函数参数或类成员变量替换模板参数。</li><li>因类型参数而造成的代码膨胀，往往可降低，做法是让带有完全相同二进制表述的具现类型共享实现码。</li></ul>
          </div>

<h3 id="条款-45：运用成员函数模板接受所有兼容类型"><a href="#条款-45：运用成员函数模板接受所有兼容类型" class="headerlink" title="条款 45：运用成员函数模板接受所有兼容类型"></a>条款 45：运用成员函数模板接受所有兼容类型</h3><div class="note note-success">
            <ul><li>请使用成员函数模板生成“可接收所有兼容类型”的函数。</li><li>如果你声明成员模板用于“泛化复制构造”或“泛化赋值操作”，你还是需要声明正常的复制构造和复制赋值操作符。</li></ul>
          </div>

<h3 id="条款-46：需要类型转换时请为模板定义非成员函数"><a href="#条款-46：需要类型转换时请为模板定义非成员函数" class="headerlink" title="条款 46：需要类型转换时请为模板定义非成员函数"></a>条款 46：需要类型转换时请为模板定义非成员函数</h3><div class="note note-success">
            <ul><li>当我们编写一个类模板，而它所提供之“与此模板相关的”函数支持“所有参数之隐式类型转换”时，请将那些函数定义为“类模板内部的友元函数”。</li></ul>
          </div>

<h3 id="条款-47：请使用萃取类表现类型信息"><a href="#条款-47：请使用萃取类表现类型信息" class="headerlink" title="条款 47：请使用萃取类表现类型信息"></a>条款 47：请使用萃取类表现类型信息</h3><div class="note note-success">
            <ul><li>Traits 类使得“类型相关信息”在编译期可用。它们以模板和模板特化完成实现。</li><li>整合重载技术后，traits 类有可能在编译期对类型执行 <code>if...else</code> 测试。</li></ul>
          </div>

<h3 id="条款-48：认识模板元编程"><a href="#条款-48：认识模板元编程" class="headerlink" title="条款 48：认识模板元编程"></a>条款 48：认识模板元编程</h3><div class="note note-success">
            <ul><li>模板元编程（Template Meta Programming, TMP）可将工作由运行期移往编译期，因而得以实现早期错误侦测和更高的执行效率。</li><li>TMP 可被用来生成“基于策略选择组合”的客户定制代码，也可用来避免生成对某些特殊类型并不适合的代码。</li></ul>
          </div>

<h2 id="8-定制-new-和-delete"><a href="#8-定制-new-和-delete" class="headerlink" title="8. 定制 new 和 delete"></a>8. 定制 new 和 delete</h2><h3 id="条款-49：了解-new-handler-的行为"><a href="#条款-49：了解-new-handler-的行为" class="headerlink" title="条款 49：了解 new-handler 的行为"></a>条款 49：了解 new-handler 的行为</h3><div class="note note-success">
            <ul><li><code>set_new_handler</code> 允许客户指定一个函数，在内存分配无法获得满足时被调用。</li><li>Nothrow new 是一个颇为局限的工具，因为它只适用于内存分配；后续的构造函数调用还是可能抛出异常。</li></ul>
          </div>

<h3 id="条款-50：了解-new-和-delete-的合理替换时机"><a href="#条款-50：了解-new-和-delete-的合理替换时机" class="headerlink" title="条款 50：了解 new 和 delete 的合理替换时机"></a>条款 50：了解 new 和 delete 的合理替换时机</h3><div class="note note-success">
            <ul><li>有许多理由需要写个自定义 <code>new</code> 和 <code>delete</code>，包括改善效能、对堆栈运用错误进行调试、收集堆栈使用信息。</li></ul>
          </div>

<h3 id="条款-51：编写-new-和-delete-时需固守常规"><a href="#条款-51：编写-new-和-delete-时需固守常规" class="headerlink" title="条款 51：编写 new 和 delete 时需固守常规"></a>条款 51：编写 new 和 delete 时需固守常规</h3><div class="note note-success">
            <ul><li><code>operator new</code> 应该内含一个无穷循环，并在其中尝试分配内存，如果它无法满足内存需求，就该调用 new-handler。它也应该有能力处理零字节申请。类专属版本则还应该处理“比正确大小更大的（错误）申请”。</li><li><code>operator delete</code> 应该在收到空指针时不做任何事。类专属版本则还应该处理“比正确大小更大的（错误）申请”。</li></ul>
          </div>

<h3 id="条款-52：写了原位-new-也要写原位-delete"><a href="#条款-52：写了原位-new-也要写原位-delete" class="headerlink" title="条款 52：写了原位 new 也要写原位 delete"></a>条款 52：写了原位 new 也要写原位 delete</h3><div class="note note-success">
            <ul><li>当你写一个 <code>placement operator new</code>，请确定也写了对应的 <code>placement operator delete</code>。如果没有这样做，你的程序可能会发生隐微而时断时续的内存泄露。</li><li>当你声明 <code>placement new</code> 和 <code>placement delete</code>，请确定不要无意思（非故意）地遮掩了它们的正常版本。</li></ul>
          </div>

<h2 id="9-杂项讨论"><a href="#9-杂项讨论" class="headerlink" title="9. 杂项讨论"></a>9. 杂项讨论</h2><h3 id="条款-53：不要轻易忽视编译器的警告"><a href="#条款-53：不要轻易忽视编译器的警告" class="headerlink" title="条款 53：不要轻易忽视编译器的警告"></a>条款 53：不要轻易忽视编译器的警告</h3><div class="note note-success">
            <ul><li>严肃对待编译器发出的警告信息。努力在你的编译器的最高（最严苛）警告级别下争取“无任何警告”的荣誉。</li><li>不要过度依赖编译器的报警能力，因为不同的编译器对待事情的态度并不相同。一旦移植到另一个编译器上，你原本依赖的警告信息有可能消失。</li></ul>
          </div>

<h3 id="条款-54：让自己熟悉包括-TR1-在内的标准程序库"><a href="#条款-54：让自己熟悉包括-TR1-在内的标准程序库" class="headerlink" title="条款 54：让自己熟悉包括 TR1 在内的标准程序库"></a>条款 54：让自己熟悉包括 TR1 在内的标准程序库</h3><div class="note note-success">
            <ul><li>C++ 标准库的主要机能由 STL、iostreams、locales 组成。并包含 C99 标准程序库。</li><li>TR1 添加了智能指针（例如 <code>tr1::shared_ptr</code>）、一般化函数指针（<code>tr1::function</code>）、基于哈希的（hash-based）容器、正则表达式（regular expression）、以及另外 10 个组件的支持。</li><li>TR1 自身只是一份规范。未获得 TR1 提供的好处，你需要一份实物。一个好的实物来源是 Boost。</li></ul>
          </div>

<h3 id="条款-55：让自己熟悉-Boost"><a href="#条款-55：让自己熟悉-Boost" class="headerlink" title="条款 55：让自己熟悉 Boost"></a>条款 55：让自己熟悉 Boost</h3><div class="note note-success">
            <ul><li>Boost 是一个社群，也是一个网站。致力于免费、源码开放、同僚复审的 C++ 程序库开发。Boost 在 C++ 标准化过程中扮演深具影响力的角色。</li><li>Boost 提供许多 TR1 组件实现品，以及其他许多程序库。</li></ul>
          </div>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a>
  
  
    <span>></span>
    
  <a href="/categories/%E6%8A%80%E6%9C%AF/C/" class="category-chain-item">C++</a>
  
  
    <span>></span>
    
  <a href="/categories/%E6%8A%80%E6%9C%AF/C/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/C/" class="print-no-link">#C++</a>
      
        <a href="/tags/%E7%BB%8F%E9%AA%8C/" class="print-no-link">#经验</a>
      
        <a href="/tags/%E5%87%86%E5%88%99/" class="print-no-link">#准则</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Effective C++</div>
      <div>http://example.com/2023/08/05/effective-cpp/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>QiDianMaker</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年8月4日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2025年7月17日</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/08/06/more-effective-cpp/" title="More Effective C++">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">More Effective C++</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/08/04/cpp-lambda-story/" title="C++ Lambda 的故事">
                        <span class="hidden-mobile">C++ Lambda 的故事</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"6xahBDKE9bVdQzuufG4r0SrN-gzGzoHsz","appKey":"aS53wAMJ32RwAJRsefQAsX9P","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div>
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
